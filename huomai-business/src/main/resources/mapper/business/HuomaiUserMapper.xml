<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.huomai.business.mapper.HuomaiUserMapper">


    <select id="queryUserList" resultType="com.huomai.business.vo.HuomaiUserVo">
        SELECT
        u.user_id,
        u.uuid,
        u.avatar,
        u.nick_name,
        u.phone,
        u.openid,
        u.unionid,
        u.address,
        u.province,
        u.city,
        u.area,
        u.birthday,
        u.constellation,
        u.sex,
        u.invite_code,
        (select IF(count(1)>0,1,0) from huomai_user_follow where follow_user_id = u.user_id and user_id =
        #{bo.curUserId}) attend_flag
        FROM
        huomai_user u
        <where>
            u.`status` = '1'
            <if test="bo.searchKey != null and bo.searchKey != ''">
                and (u.nick_name like concat('%',#{bo.searchKey},'%') or u.uuid like concat('%',#{bo.searchKey},'%'))
            </if>
        </where>

    </select>
</mapper>
